<$- include('./../_partials/head') $>
<br>
<br>
<br>
<br>
<br>
<br>
<div class="container">

    <$ var sumAmount = 0 $> 
    <$= transaction.payments.forEach(function(payment){
    sumAmount += payment.amount;
    }) $>
    <div class="pull-right">Remaining Balance Due: <$= transaction.amount - sumAmount $></div>
    <br>
    <br>

    <table class="table">
        <tr>
            <th>Date</th>
            <th>Name</th>
            <th>Description</th>
            <th>Amount</th>
            <th>Phone</th>
        </tr>

        <tr>
        <td><$= transaction.date $></td>
        <td><$= transaction.name $></td>
        <td><$= transaction.description $></td>
        <td><$= transaction.amount $></td>
        <td><$= transaction.phone $></td>
        </tr>
    </table>
<br>
<br>
<br> 


<form class="col-xs-4" action="/transactions/<$= transaction.id $>/payments" method="post">
    <div class="form-group">
        <label>Date</label>  
        <input type="text" class="form-control" name="date">
    </div>
    <div class="form-group">
        <label>Amount</label>
        <input type="text" class="form-control" name="amount">
    </div>
        <input type="hidden" name="_method" value="put"/>
        <button class="btn btn-default" type="submit" name="paymentId">Add Payment</button>
    </div>
</form>
<br>
<br>

<table class="table">
    <tr>
      <th>Date</th>
      <th>Amount Paid</th>
    </tr>
    <tr>  
    <$ transaction.payments.forEach(function(payment){ $>
        <td><$= payment.date $></td>
        <td><$= payment.amount $></td>
    <$ }) $> 
    </tr>
</table>

</div>

<$- include('./../_partials/footer') $> 